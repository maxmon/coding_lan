<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>6 | </title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../lisp/7.html" />
    
    
    <link rel="prev" href="../lisp/5.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="4.6"
        data-chapter-title="6"
        data-filepath="lisp/6.md"
        data-basepath=".."
        data-revision="Sun May 08 2016 23:52:07 GMT+0800 (CST)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="regular-expression.html">
            
                
                    <a href="../regular-expression.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        re正则表达式
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="py/python.html">
            
                
                    <a href="../py/python.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        python
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="py/base.html">
            
                
                    <a href="../py/base.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        python基础
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="py/deep.html">
            
                
                    <a href="../py/deep.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        python进阶
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="py/libs.html">
            
                
                    <a href="../py/libs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        python常用类库
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="py/ipython.html">
            
                
                    <a href="../py/ipython.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        ipython
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="py/numpy.html">
            
                
                    <a href="../py/numpy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        numpy
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="ruby/index.html">
            
                
                    <a href="../ruby/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        ruby
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="ruby/ruby.html">
            
                
                    <a href="../ruby/ruby.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        ruby
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="ruby/rubyOnRails.html">
            
                
                    <a href="../ruby/rubyOnRails.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        rubyOnRails
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="lisp/common-lisp.html">
            
                
                    <a href="../lisp/common-lisp.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        common-lisp
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="lisp/1.html">
            
                
                    <a href="../lisp/1.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        1
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="lisp/2.html">
            
                
                    <a href="../lisp/2.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        2
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="lisp/3.html">
            
                
                    <a href="../lisp/3.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        3
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="lisp/4.html">
            
                
                    <a href="../lisp/4.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        4
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="lisp/5.html">
            
                
                    <a href="../lisp/5.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        5
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="4.6" data-path="lisp/6.html">
            
                
                    <a href="../lisp/6.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                        6
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="lisp/7.html">
            
                
                    <a href="../lisp/7.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.</b>
                        
                        7
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="lisp/8.html">
            
                
                    <a href="../lisp/8.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.8.</b>
                        
                        8
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.9" data-path="lisp/9.html">
            
                
                    <a href="../lisp/9.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.9.</b>
                        
                        9
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.10" data-path="lisp/10.html">
            
                
                    <a href="../lisp/10.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.10.</b>
                        
                        10
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.11" data-path="lisp/11.html">
            
                
                    <a href="../lisp/11.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.11.</b>
                        
                        11
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.12" data-path="lisp/12.html">
            
                
                    <a href="../lisp/12.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.12.</b>
                        
                        12
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.13" data-path="lisp/13.html">
            
                
                    <a href="../lisp/13.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.13.</b>
                        
                        13
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.14" data-path="lisp/14.html">
            
                
                    <a href="../lisp/14.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.14.</b>
                        
                        14
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="shell.html">
            
                
                    <a href="../shell.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        shell
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="r.html">
            
                
                    <a href="../r.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        r
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="git.html">
            
                
                    <a href="../git.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        git
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="svn.html">
            
                
                    <a href="../svn.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        svn
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="command_line.html">
            
                
                    <a href="../command_line.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        command line
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="website.html">
            
                
                    <a href="../website.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        website
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" ></a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="list-data-structures">List Data Structures</h1>
<p>CONS, LIST, APPEND, LENGT,
REVERSE, NTH, NTHCDR, LAST, and REMOVE.</p>
<ul>
<li>List functions: APPEND, REVERSE, NTH, NTHCDR, LAST, REMOVE.</li>
<li>Set functions: UNION, INTERSECTION, SET-DIFFERENCE,SET-EXCLUSIVE-OR, MEMBER, SUBSETP, REMOVE-DUPLICATES.
Table functions: ASSOC, RASSOC.</li>
</ul>
<p>Tree functions: SUBST, SUBLIS.
Additional equality functions: EQ, EQL, EQUALP, =.
Keyword predicate: KEYWORDP.</p>
<h2 id="cons">cons</h2>
<p><code>(cons &#x2019;w &#x2019;(x y z)) &#x21D2; (w x y z)</code></p>
<p><code>(cons &#x2019;(a b c) &#x2019;d) &#x21D2; ((a b c) . d)</code></p>
<p><img src="0601.png" alt=""></p>
<h2 id="append">append</h2>
<pre><code>&gt; (setf who &#x2019;(only the good))
(ONLY THE GOOD)
&gt; (append who &#x2019;(die young))
(ONLY THE GOOD DIE YOUNG)
&gt; who
(ONLY THE GOOD) 
</code></pre><p><img src="0602.png" alt=""></p>
<h3 id="attention">attention</h3>
<p><strong>first input must be a list</strong></p>
<p><code>(append &#x2019;a &#x2019;(b c d)) &#x21D2; Error! A is not a list.</code></p>
<p><code>(append &#x2019;(w x y) &#x2019;z) &#x21D2; (W X Y . Z)</code></p>
<h2 id="vs-cons-list-append">vs cons list append</h2>
<ul>
<li>CONS creates one new conscell. It is often used to add an
element to the front of a list.</li>
<li>LIST makes new lists by acceptingan arbitrary number of inputs
and building a chain of cons cells ending in NIL. The car of each
cell points to the corresponding input.</li>
<li>APPEND appends lists together by copyingits first input and
making the cdr of the last cell of the copypoint to the second
input. Itis an error for the first input to APPEND to be a non-list.</li>
</ul>
<h2 id="reverse">reverse</h2>
<p>reverse top-level list</p>
<pre><code>&gt; (reverse &#x2019;((my oversight)
(your blunder)
(his negligence)))
((HIS NEGLIGENCE) (YOUR BLUNDER) (MY OVERSIGHT))
</code></pre><h2 id="nthcdr-nth">nthcdr nth</h2>
<p>nthcdr  return list
    (nthcdr 3 &#x2019;(a b c)) &#x21D2; nil
    (nthcdr 5 &#x2019;(a b c)) &#x21D2; nil
    (nthcdr 2 &#x2019;(a b c . d)) &#x21D2; (c . d)</p>
<p>nth return con cell value</p>
<pre><code>(defun nth (n x)
&quot;Returns the Nth element of the list X,
counting from 0.&quot;
(car (nthcdr n x)))
</code></pre><h2 id="last">last</h2>
<p>LAST returns the last cons cell of a list</p>
<pre><code>(last &#x2019;(all is forgiven)) &#x21D2; (forgiven)
(last nil) &#x21D2; nil
(last &#x2019;(a b c . d)) &#x21D2; (c . d)
(last &#x2019;nevermore) &#x21D2; Error! NEVERMORE is not a list.
</code></pre><h2 id="remove">remove</h2>
<pre><code>&gt; (setf spell &#x2019;(a b r a c a d a b r a))
(A B R A C A D A B R A)
&gt; (remove &#x2019;a spell)
(B R C D B R)
&gt; spell
(A B R A C A D A B R A)
</code></pre><p>&gt;
keyword</p>
<pre><code>&gt; (remove &#x2019;(5 diamonds) cards)
((3 CLUBS) (5 DIAMONDS) (ACE SPADES))
&gt; (remove &#x2019;(5 diamonds) cards :test #&#x2019;equal)
((3 CLUBS) (ACE SPADES))
</code></pre><h2 id="vs">vs</h2>
<p><img src="0603.png" alt=""></p>
<h2 id="lists-as-sets">LISTS AS SETS</h2>
<h3 id="member">member</h3>
<p>MEMBER return the sublist beginning with the
item sought made ita much more useful function</p>
<pre><code>&gt; (setf ducks &#x2019;(huey dewey louie)) Create a set of ducks.
(HUEY DEWEY LOUIE)
&gt; (member &#x2019;dewey ducks) Is Dewey a duck?
(DEWEY LOUIE) Non-NIL result: yes.
&gt; (member &#x2019;mickey ducks) Is Mickey a duck?
NIL NIL: no.
</code></pre><p>&gt;
MEMBER uses EQL to test whether an item appears in a set</p>
<pre><code>(setf cards
&#x2019;((3 clubs) (5 diamonds) (ace spades)))
(member &#x2019;(5 diamonds) cards) &#x21D2; nil

&gt; (member &#x2019;(5 diamonds) cards :test #&#x2019;equal)
((5 DIAMONDS) (ACE SPADES))
</code></pre><h3 id="intersection">intersection</h3>
<p>&#x4EA4;&#x96C6;</p>
<pre><code>&gt; (intersection &#x2019;(fred john mary)
&#x2019;(sue mary fred))
(FRED MARY)
&gt; (intersection &#x2019;(a s d f g)
&#x2019;(v w s r a))
(A S)
&gt; (intersection &#x2019;(foo bar baz)
&#x2019;(xam gorp bletch))
NIL
</code></pre><h3 id="union">union</h3>
<p>&#x5E76;&#x96C6;</p>
<pre><code>&gt; (union &#x2019;(fred john mary)
&#x2019;(sue mary fred))
(FRED JOHN MARY SUE)
</code></pre><h3 id="setdifference">set-difference</h3>
<p>return first input &#x5E76;-&#x4EA4; </p>
<pre><code>&gt; (set-difference &#x2019;(alpha bravo charlie delta)
&#x2019;(bravo charlie))
(ALPHA DELTA)
</code></pre><h3 id="subsetp">SUBSETP</h3>
<p>predicate contained relation-ship</p>
<pre><code>(subsetp &#x2019;(a i) &#x2019;(a e i o u)) &#x21D2; t
(subsetp &#x2019;(a x) &#x2019;(a e i o u)) &#x21D2; nil
</code></pre><h2 id="lists-as-tables">LISTS AS TABLES</h2>
<pre><code>&#x2019;((one un)
(two deux))))

&apos;((object1 large green shiny cube)
(object2 small red dull metal cube))
</code></pre><h3 id="assoc-rassoc">assoc rassoc</h3>
<p><code>(assoc &#x2019;three words) &#x21D2; (three trois)</code></p>
<p><code>(rassoc &#x2019;trois words) &#x21D2; (three trois)</code></p>
<h2 id="lisp-toolkit-sdraw">Lisp Toolkit: SDRAW</h2>
<p> a tool for drawing conscell representations of lists</p>
<pre><code>&gt; (sdraw &#x2019;(alpha (bravo) charlie))
[*|*]---&gt;[*|*]---------&gt;[*|*]---&gt;NIL
| ||
v vv
ALPHA [*|*]---&gt;NILCHARLIE
|
v
BRAVO
</code></pre><p> SDRAW-LOOP acts like a readeval-print loop except it draws the result aswell as printing it.</p>
<pre><code>&gt; (sdraw-loop)
Type any Lisp expression, or (ABORT) to exit.
S&gt; (cons &#x2019;(birds dont have) &#x2019;noses)
[*|*]---&gt;NOSES
|
v
[*|*]---&gt;[*|*]---&gt;[*|*]---&gt;NIL
| | |
v v v
BIRDS DONTHAVE
Result: ((BIRDSDONT HAVE) . NOSES)
</code></pre><h2 id="tree">tree</h2>
<p>Trees are nested lists</p>
<h3 id="subst">subst</h3>
<pre><code>&gt; (subst &#x2019;bill &#x2019;fred &#x2019;(keep off the grass))
(KEEP OFF THE GRASS)
&gt; (subst &#x2019;on &#x2019;off &#x2019;(keep off the grass))
(KEEP ON THE GRASS)
</code></pre><h3 id="sublis">sublis</h3>
<p>like SUBST, except it can make many substitutions
simultaneously. </p>
<p>The first input to SUBLIS is a table whose entries are dotted
pairs. The second input is the list in which the substitutions are to be made.</p>
<pre><code>&gt; (sublis &#x2019;((roses . violets) (red . blue))
&#x2019;(roses are red))
(VIOLETS ARE BLUE)
(setf dotted-words
&#x2019;((one .un)
(two .deux)
(three . trois)
(four .quatre)
(five .cinq)))
&gt; (sublis dotted-words &#x2019;(three one four one five))
(TROIS UN QUATRE UN CINQ)
</code></pre><h3 id="efficiencyof-list-operations">EFFICIENCYOF LIST OPERATIONS</h3>
<pre><code>;;;create n + 1 cells
(defun add-to-end-1 (x y)
(append x (list y)))

;;;create n + 1 + ( n + 1 )cells
(defun add-to-end-2 (x y)
(reverse (cons y (reverse x))))
</code></pre><h2 id="shared-structure">SHARED STRUCTURE</h2>
<p>Lists
that are typed in fromthe keyboard will never share structure, because READ
builds every listit sees from fresh cons cells. But using CAR, CDR, and
CONS it is possible to create lists that do share structure.</p>
<pre><code>&gt; (setf x &#x2019;(a b c))
(A B C)
&gt; (setf y (cons &#x2019;d (cdr x)))
(D B C)
</code></pre><p><img src="0604.png" alt=""></p>
<h2 id="equality-of-objects">EQUALITY OF OBJECTS</h2>
<p>In Lisp, symbols are unique</p>
<p><code>(TIME AFTER
TIME)</code></p>
<p><img src="0605.png" alt=""></p>
<ul>
<li>EQ is the fastest equality test:It compares addresses  <strong>EQ should never be used to compare numbers</strong></li>
<li>EQL is like EQ except it can safely compare numbers of the same
type</li>
<li>EQUAL is the predicate beginners should use. It compares lists
element by element</li>
<li>EQUALP is more liberal than EQUAL: It ignores case distinctions
in strings, among other things.</li>
<li>= is the most efficient way to compare numbers</li>
</ul>
<p>summary</p>
<pre><code>(setf x1 (list &#x2019;a &#x2019;b &#x2019;c)) Make a fresh list (A B C)
(A B C)
(setf x2 (list &#x2019;a &#x2019;b &#x2019;c)) Make another list (A B C).
(A B C)
(equal x1 x2) The lists are EQUAL.
T

(eq x1 x2) The two lists are not EQ.
NIL

(eql &#x2019;foo &#x2019;foo) &#x21D2; t
(eql 3 3) &#x21D2; t
(eql 3 3.0) &#x21D2; nil Different types.

(= 3 3.0) &#x21D2; t
(= &#x2019;foo &#x2019;foo) &#x21D2; Error! FOO is not a number.

(equal &quot;foo bar&quot; &quot;Foo BAR&quot;) &#x21D2; nil
(equalp &quot;foo bar&quot; &quot;Foo BAR&quot;) &#x21D2; t
</code></pre><h2 id="keyword-arguments">KEYWORD ARGUMENTS</h2>
<pre><code>(setf text &#x2019;(b a n a n a - p a n d a))
&gt; (remove &#x2019;a text) Remove all As.
(B N N - P N D)
&gt; (remove &#x2019;a text :count 3) Remove 3 As.
(B N N - P A N D A)
&gt; (remove &#x2019;a text :count 2 :from-end t)
(B A N A N A - P N D)
</code></pre><p>A keyword is a special type of symbol</p>
<p><code>(keywordp :count) &#x21D2; t</code></p>
<p>Other functions that accept a :TEST keywordare UNION,
INTERSECTION, SET-DIFFERENCE, ASSOC, RASSOC,SUBST, and
SUBLIS.t</p>
<p>use equal instead of eql</p>
<pre><code>(setf cards
&#x2019;((3 clubs) (5 diamonds) (ace spades)))
(member &#x2019;(5 diamonds) cards) &#x21D2; nil

&gt; (member &#x2019;(5 diamonds) cards :test #&#x2019;equal)
((5 DIAMONDS) (ACE SPADES))

&gt; (remove &#x2019;(5 diamonds) cards)
((3 CLUBS) (5 DIAMONDS) (ACE SPADES))
&gt; (remove &#x2019;(5 diamonds) cards :test #&#x2019;equal)
((3 CLUBS) (ACE SPADES))
</code></pre>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../lisp/5.html" class="navigation navigation-prev " aria-label="Previous page: 5"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../lisp/7.html" class="navigation navigation-next " aria-label="Next page: 7"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
